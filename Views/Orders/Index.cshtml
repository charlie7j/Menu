@model IEnumerable<Order>

@{
    ViewData["Title"] = "Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª";
    Layout = "_LayoutDashboard";
}


<div class="container-fluid py-4">
    <div class="row">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center">
                    <h4 class="text-danger mb-0">
                        <i class="bi bi-cart me-2"></i>Ø§Ù„Ø·Ù„Ø¨Ø§Øª
                    </h4>
                    <a asp-action="Create" class="btn btn-danger btn-sm">
                        <i class="bi bi-plus-lg me-1"></i>Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
                    </a>
                </div>
                <div class="card-body px-0">
                    <div class="table-responsive">
                        <table class="table align-items-center mb-0">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th class="text-uppercase text-danger text-xs font-weight-bolder">Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</th>
                                    <th class="text-uppercase text-danger text-xs font-weight-bolder">Ø±Ù‚Ù… Ø§Ù„Ø·Ø§ÙˆÙ„Ø©</th>
                                    <th class="text-uppercase text-danger text-xs font-weight-bolder">ÙˆÙ‚Øª Ø§Ù„Ø·Ù„Ø¨</th>
                                    <th class="text-uppercase text-danger text-xs font-weight-bolder">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model)
                                {
                                    <tr>
                                        <td class="text-xs font-weight-bold ps-4">@item.OrderId</td>
                                        <td class="text-xs font-weight-bold">@item.TableNumber</td>
                                        <td class="text-xs font-weight-bold">@item.OrderDateTime.ToString("hh:mm tt")</td>
                                        <td>
                                            <a asp-action="Edit" asp-route-id="@item.OrderId" class="btn btn-outline-warning btn-sm">
                                                <i class="bi bi-pencil-square me-1"></i>ØªØ¹Ø¯ÙŠÙ„
                                            </a>
                                            <a asp-action="Details" asp-route-id="@item.OrderId" class="btn btn-outline-info btn-sm">
                                                <i class="bi bi-eye me-1"></i>ØªÙØ§ØµÙŠÙ„
                                            </a>
                                            <a asp-action="Delete" asp-route-id="@item.OrderId" class="btn btn-outline-danger btn-sm">
                                                <i class="bi bi-trash3 me-1"></i>Ø­Ø°Ù
                                            </a>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f5f5f5;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
    }

    .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .btn-create {
        background-color: #ff5b7d;
        color: white;
        border: none;
        border-radius: 4px;
        padding: 10px 15px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .btn-create i {
        font-size: 18px;
    }

    .nav-buttons {
        display: flex;
        gap: 10px;
    }

    .nav-buttons button {
        background-color: #6c7dfa;
        color: white;
        border: none;
        border-radius: 4px;
        padding: 10px 15px;
        cursor: pointer;
    }

    .month-display {
        font-size: 24px;
        font-weight: bold;
        color: #555;
    }

    .view-buttons {
        display: flex;
        gap: 10px;
    }

    .view-buttons button {
        background-color: #6c7dfa;
        color: white;
        border: none;
        border-radius: 4px;
        padding: 8px 15px;
        cursor: pointer;
    }

    .sidebar {
        width: 250px;
        float: right;
        margin-left: 20px;
    }

    .info-text {
        margin-bottom: 20px;
        color: #666;
    }

    .event-types {
        display: flex;
        gap: 10px;


    }

    .event-type {
        display: flex;
        align-items: center;
        padding: 10px;
        border-radius: 4px;
        cursor: pointer;
        width: 250px;
    }

    .event-type-circle {
        width: 15px;
        height: 15px;
        border-radius: 50%;
        margin-left: 10px;
    }

    .help-section {
        margin-top: 40px;
        color: #666;
        font-weight: bold;
    }

    .tables-grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 5px;
        border-collapse: collapse;
    }

    .grid-header {
        background-color: #f0f0f0;
        padding: 10px;
        text-align: center;
        font-weight: bold;
        border: 1px solid #ddd;
    }

    .table-cell {
        min-height: 100px;
        border: 1px dashed #ddd;
        padding: 5px;
        position: relative;
    }

    .table-number {
        position: absolute;
        top: 5px;
        right: 5px;
        color: #888;
    }

    .order-item {
        border-radius: 4px;
        padding: 8px;
        margin-bottom: 5px;
        cursor: grab;
        font-size: 14px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .order-item.dragging {
        opacity: 1;
        border: 1px solid rgb(65, 65, 65);
        height: 100%;
    }

    .order-actions {
        display: flex;
        gap: 5px;
    }

    .order-actions button {
        background: none;
        border: none;
        cursor: pointer;
        font-size: 16px;
        padding: 0;
        color: #555;
    }

    .status-free {
        background-color: #fbfbfba8;
    }

    .status-reserved {
        background-color: #fbacbd;
    }

    .status-occupied {
        background-color: #f7edb9;
    }

    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 100;
        justify-content: center;
        align-items: center;
    }

    .modal-content {
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        width: 400px;
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }

    .modal-title {
        font-size: 18px;
        font-weight: bold;
    }

    .close-modal {
        background: none;
        border: none;
        font-size: 20px;
        cursor: pointer;
    }

    .form-group {
        margin-bottom: 15px;
    }

    .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
    }

    .form-group input,
    .form-group select {
        width: 100%;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
    }

    .modal-footer {
        display: flex;
        justify-content: flex-end;
        margin-top: 20px;
        gap: 10px;
    }

    .modal-btn {
        padding: 8px 15px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    .btn-save {
        background-color: #4caf50;
        color: white;
    }

    .btn-cancel {
        background-color: #f44336;
        color: white;
    }

    .order-details-modal-content {
        padding: 20px;
    }

    .order-details-modal-content p {
        margin-bottom: 10px;
    }
</style>





<div class="container shadow-lg bg-white py-4 rounded-3">
    <div class="header">
        <button class="btn-create" onclick="openNewOrderModal()">
            <span>+</span> Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
        </button>

        <div class="event-types" style="padding-right: 20px;">
            <div class="event-type" style="background-color: #e0fff0;">
                <div class="event-type-circle" style="background-color: #1de9b6;"></div>
                <span>Ø·Ø§ÙˆÙ„Ø© Ù…Ø´ØºÙˆÙ„Ø©</span>
            </div>
            <div class="event-type" style="background-color: #e0e8ff;">
                <div class="event-type-circle" style="background-color: #4285f4;"></div>
                <span>Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</span>
            </div>
            <div class="event-type" style="background-color: #ffecf0;">
                <div class="event-type-circle" style="background-color: #ff5b7d;"></div>
                <span>Ø·Ø§ÙˆÙ„Ø© Ù…Ø­Ø¬ÙˆØ²Ø©</span>
            </div>
        </div>

    </div>

    <div class="content-wrapper">
        <div class="sidebar" style="overflow-y: scroll;height: 500px;overflow-x: hidden;">
            <div class="orders-list" style="padding-right: 30px;">
                @foreach (var item in Model)
                {
                    <div class="order-item row" draggable="true" ondragstart="drag(event)" id="order-@item.OrderId"
                        style="background-color: #f0f0f0;">
                        <div class="col-md-10">#Order :@item.OrderId</div>
                        <div class="order-actions col-md-2">
                            <button title="ØªÙØ§ØµÙŠÙ„" onclick="showOrderDetails('order-@item.OrderId')">ğŸ‘ï¸</button>
                        </div>
                    </div>
                }
            </div>
        </div>

        <div class="tables-container">
            <div class="tables-grid">
                @for (int i = 1; i < 31; i++)
                {
                    <div class="table-cell status-free" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="showTableDetailsModal(@i)">
                          <!----!> 
                        <div class="table-number">@i</div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<div class="modal" id="orderModal">
    <div class="modal-content">
        <div class="modal-header">
            <div class="modal-title">Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</div>
            <button class="close-modal" onclick="closeOrderModal()">&times;</button>
        </div>
        <div class="form-group">
            <label>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</label>
            <input type="text" id="orderNumber">
        </div>
        <div class="form-group">
            <label>ÙˆØµÙ Ø§Ù„Ø·Ù„Ø¨</label>
            <input type="text" id="orderDescription">
        </div>
        <div class="form-group">
            <label>Ø±Ù‚Ù… Ø§Ù„Ø·Ø§ÙˆÙ„Ø©</label>
            <select id="tableNumber">
                <option value="">Ø§Ø®ØªØ± Ø·Ø§ÙˆÙ„Ø©</option>
                @for (int i = 1; i < 31; i++)
                {
                    <option value="@i">Ø·Ø§ÙˆÙ„Ø© @i</option>
                }
            </select>
        </div>
        <div class="form-group">
            <label>Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© Ù„Ù„Ø·Ø§ÙˆÙ„Ø©</label>
            <select id="initialTableStatus">
                <option value="occupied">Ù…Ø´ØºÙˆÙ„Ø©</option>
                <option value="reserved">Ù…Ø­Ø¬ÙˆØ²Ø©</option>
                <option value="free">Ø´Ø§ØºØ±Ø©</option>
            </select>
        </div>
        <div class="modal-footer">
            <button class="modal-btn btn-cancel" onclick="closeOrderModal()">Ø¥Ù„ØºØ§Ø¡</button>
            <button class="modal-btn btn-save" onclick="saveNewOrder()">Ø­ÙØ¸</button>
        </div>
    </div>
</div>

<div class="modal" id="tableDetailsModal">
    <div class="modal-content">
        <div class="modal-header">
            <div class="modal-title" id="tableDetailsTitle">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ø§ÙˆÙ„Ø©</div>
            <button class="close-modal" onclick="closeTableDetailsModal()">&times;</button>
        </div>
        <div class="form-group">
            <label>Ø±Ù‚Ù… Ø§Ù„Ø·Ø§ÙˆÙ„Ø©</label>
            <input type="text" id="detailsTableNumber" readonly style="border:none">
        </div>
        <div class="form-group">
            <label>Ø§Ù„Ø­Ø§Ù„Ø©</label>
            <select id="detailsTableStatus" onchange="updateTableStatusFromDetails()">
                <option value="free">Ø´Ø§ØºØ±Ø©</option>
                <option value="reserved">Ù…Ø­Ø¬ÙˆØ²Ø©</option>
                <option value="occupied">Ù…Ø´ØºÙˆÙ„Ø©</option>
            </select>
        </div>
        <div class="form-group">
            <label>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</label>
            <div id="currentOrders">
            </div>
        </div>
        <div class="modal-footer">
            <button class="modal-btn btn-cancel" onclick="closeTableDetailsModal()">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>
</div>

<div class="modal" id="orderDetailsModal">
    <div class="modal-content order-details-modal-content">
        <div class="modal-header">
            <div class="modal-title">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨</div>
            <button class="close-modal" onclick="closeOrderDetailsModal()">&times;</button>
        </div>
        <div id="orderDetailsContent">
        </div>
        <div class="modal-footer">
            <button class="modal-btn btn-cancel" onclick="closeOrderDetailsModal()">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>
</div>






<script>
    let currentOrdersData = []; // Ù„ØªØ®Ø²ÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø¨Ø§Øª

    // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª
    function allowDrop(ev) {
        ev.preventDefault();
    }

    function drag(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
        ev.target.classList.add("dragging");
    }

    
function drop(ev) {
    ev.preventDefault();
    var data = ev.dataTransfer.getData("text");
    var draggedElement = document.getElementById(data);
    draggedElement.classList.remove("dragging");

    const targetTable = ev.currentTarget;
    const previousParent = draggedElement.parentElement;

    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¹Ù†ØµØ± Ù‚Ø§Ø¯Ù…Ø§Ù‹ Ù…Ù† Ø·Ø§ÙˆÙ„Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
    if (previousParent) {
        if (previousParent.classList.contains("table-cell")) {
            previousParent.removeChild(draggedElement);
            if (previousParent.querySelectorAll(".order-item").length === 0) {
                updateTableStatusElement(previousParent, "free");
            }
        } else if (previousParent.classList.contains("orders-list")) {
            previousParent.removeChild(draggedElement);
        }

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø³Ø­ÙˆØ¨ Ø¥Ù„Ù‰ Ø§Ù„Ø·Ø§ÙˆÙ„Ø© Ø§Ù„Ù‡Ø¯Ù (Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙÙŠ addOrderToTable)
        addOrderToTable(targetTable, draggedElement.querySelector('.col-md-10').innerText, draggedElement.id);
        updateTableStatusElement(targetTable, "occupied");
    }
}

 
 // Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ø®Ù„ÙŠØ© Ø§Ù„Ø¬Ø¯ÙˆÙ„
    function addOrderToTable(tableCell, orderText, orderId) {
        let orderItem = tableCell.querySelector(`#${orderId}`);

        if (!orderItem) {
            // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ù‹Ø§
            orderItem = document.createElement("div");
            orderItem.className = "order-item row";
            orderItem.draggable = true;
            orderItem.id = orderId;
            orderItem.innerHTML = `<div class="col-md-10">${orderText}</div>`; // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ù†ØµÙŠ ÙÙ‚Ø· ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
            orderItem.addEventListener("dragstart", drag);
            tableCell.appendChild(orderItem);
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø§Ù„ÙØ¹Ù„
        const orderActions = orderItem.querySelector(".order-actions");
        if (!orderActions) {
            // Ø¥Ø¶Ø§ÙØ© Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©
            const actionsDiv = document.createElement("div");
            actionsDiv.className = "order-actions col-md-2";
            actionsDiv.innerHTML = `<button title="ØªÙØ§ØµÙŠÙ„" onclick="showOrderDetails('${orderId}')">ğŸ‘ï¸</button><button title="Ø¥Ù„ØºØ§Ø¡" onclick="cancelOrder(this.parentNode.parentNode)">ğŸ—‘ï¸</button><button title="Ù„Ù„Ø¯ÙØ¹" onclick="moveToPayment(this.parentNode.parentNode)">ğŸ’°</button>`;
            orderItem.appendChild(actionsDiv);
        }
    }

    // ÙˆØ¸ÙŠÙØ© ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø¹Ù†ØµØ± Ø§Ù„Ø·Ø§ÙˆÙ„Ø© Ø§Ù„Ù…Ø±Ø¦ÙŠØ©
    function updateTableStatusElement(tableCell, status) {
        if (!tableCell) return;
        tableCell.classList.remove("status-free", "status-reserved", "status-occupied");
        tableCell.classList.add(`status-${status}`);
    }

    // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Modal) Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
    function openNewOrderModal() {
        document.getElementById("orderModal").style.display = "flex";
    }

    function closeOrderModal() {
        document.getElementById("orderModal").style.display = "none";
        resetNewOrderForm();
    }

    function resetNewOrderForm() {
        document.getElementById("orderNumber").value = "";
        document.getElementById("orderDescription").value = "";
        document.getElementById("tableNumber").value = "";
        document.getElementById("initialTableStatus").value = "occupied";
    }

    function saveNewOrder() {
        const orderNumber = document.getElementById("orderNumber").value;
        const orderDescription = document.getElementById("orderDescription").value;
        const tableNumber = document.getElementById("tableNumber").value;
        const initialTableStatus = document.getElementById("initialTableStatus").value;

        if (!orderNumber || !orderDescription) {
            alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");
            return;
        }

        const newOrderId = "order" + (Math.floor(Math.random() * 1000) + 100);
        const orderText = `Ø·Ù„Ø¨ #${orderNumber} - ${orderDescription}`;

        if (tableNumber) {
            const tableCells = document.querySelectorAll(".table-cell");
            for (const cell of tableCells) {
                const cellNumber = parseInt(cell.querySelector(".table-number").innerText);
                if (cellNumber === parseInt(tableNumber)) {
                    addOrderToTable(cell, orderText, newOrderId);
                    updateTableStatusElement(cell, initialTableStatus);
                    break;
                }
            }
        } else {
            const newOrderItem = document.createElement("div");
            newOrderItem.className = "order-item";
            newOrderItem.draggable = true;
            newOrderItem.id = newOrderId;
            newOrderItem.innerHTML = `<span>${orderText}</span><div class="order-actions"><button title="ØªÙØ§ØµÙŠÙ„" onclick="showOrderDetails('${newOrderId}')">ğŸ‘ï¸</button></div>`;
            newOrderItem.addEventListener("dragstart", drag);
            document.querySelector(".orders-list").appendChild(newOrderItem);
        }

        closeOrderModal();
    }

    // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Modal) Ø§Ù„Ø®Ø§ØµØ© Ø¨ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ø§ÙˆÙ„Ø©
    function showTableDetailsModal(tableNumber) {
        const modal = document.getElementById("tableDetailsModal");
        const title = document.getElementById("tableDetailsTitle");
        const tableNumberInput = document.getElementById("detailsTableNumber");
        const tableStatusSelect = document.getElementById("detailsTableStatus");
        const currentOrdersDiv = document.getElementById("currentOrders");

        const tableCells = document.querySelectorAll(".table-cell");
        let targetCell;
        for (const cell of tableCells) {
            const cellNumber = parseInt(cell.querySelector(".table-number").innerText);
            if (cellNumber === tableNumber) {
                targetCell = cell;
                break;
            }
        }

        if (!targetCell) return;

        title.innerText = `ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ø§ÙˆÙ„Ø© ${tableNumber}`;
        tableNumberInput.value = tableNumber;
        tableStatusSelect.value = targetCell.classList.contains("status-free") ? "free" :
            targetCell.classList.contains("status-reserved") ? "reserved" : "occupied";

        currentOrdersDiv.innerHTML = "";
        const orders = targetCell.querySelectorAll(".order-item");
        if (orders.length === 0) {
            currentOrdersDiv.innerHTML = "<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­Ø§Ù„ÙŠØ©</p>";
        } else {
            orders.forEach(order => {
                const orderDiv = document.createElement("div");
                orderDiv.className = "order-item";
                orderDiv.innerHTML = order.innerHTML; // Ù†Ù‚Ù„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
                currentOrdersDiv.appendChild(orderDiv);
            });
        }

        modal.style.display = "flex";
        modal.dataset.tableNumber = tableNumber;
    }

    function closeTableDetailsModal() {
        document.getElementById("tableDetailsModal").style.display = "none";
    }

    function updateTableStatusFromDetails() {
        const modal = document.getElementById("tableDetailsModal");
        const tableNumber = modal.dataset.tableNumber;
        const newStatus = document.getElementById("detailsTableStatus").value;

        const tableCells = document.querySelectorAll(".table-cell");
        for (const cell of tableCells) {
            const cellNumber = parseInt(cell.querySelector(".table-number").innerText);
            if (cellNumber === parseInt(tableNumber)) {
                updateTableStatusElement(cell, newStatus);
                break;
            }
        }
    }

    // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„Ø·Ø§ÙˆÙ„Ø©
    function showOrderOptions(orderItem) {
        // ÙŠÙ…ÙƒÙ†Ùƒ Ù‡Ù†Ø§ Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø®ÙŠØ§Ø±Ø§Øª Ù…Ø«Ù„ Ø¥Ù„ØºØ§Ø¡ØŒ ØªØ­ÙˆÙŠÙ„ Ù„Ù„Ø¯ÙØ¹ØŒ ØªÙØ§ØµÙŠÙ„
        alert(`Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø·Ù„Ø¨: ${orderItem.querySelector('span').innerText}`);
    }

    function cancelOrder(orderItemElement) {
        const tableCell = orderItemElement.parentNode;
        if (confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨: ${orderItemElement.querySelector('span').innerText}ØŸ`)) {
            orderItemElement.remove();
            if (tableCell.querySelectorAll(".order-item").length === 0) {
                updateTableStatusElement(tableCell, "free");
            }
        }
    }

    function moveToPayment(orderItemElement) {
        alert(`ØªÙ… ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨: ${orderItemElement.querySelector('span').innerText} Ù„Ù„Ø¯ÙØ¹.`);
        const tableCell = orderItemElement.parentNode;
        orderItemElement.remove();
        if (tableCell.querySelectorAll(".order-item").length === 0) {
            updateTableStatusElement(tableCell, "free");
        }
        // ÙŠÙ…ÙƒÙ†Ùƒ Ù‡Ù†Ø§ Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚ Ù„Ù†Ù‚Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙØ¹
    }

    // ÙˆØ¸ÙŠÙØ© Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨
    function showOrderDetails(orderId) {

        alert("kkk");

        const modal = document.getElementById("orderDetailsModal");
        const contentDiv = document.getElementById("orderDetailsContent");
        const orderElement = document.getElementById(orderId);

        if (orderElement) {
            contentDiv.innerHTML = `<p><b>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨:</b> ${orderId.replace('order', '')}</p><p><b>Ø§Ù„ÙˆØµÙ:</b> ${orderElement.querySelector('span').innerText.split(' - ')[1] || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}</p>`;
            modal.style.display = "flex";
        }
    }

    function closeOrderDetailsModal() {
        document.getElementById("orderDetailsModal").style.display = "none";
    }
</script>